(this.webpackJsonpbattlehip=this.webpackJsonpbattlehip||[]).push([[0],{29:function(e,n,t){},30:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a,r,c,i,o,s,l,u,d,b,j,p,h,f,O,m,x,y,g,v,I,P,w,k,S,T,A,C,E,R,N,D=t(1),L=t.n(D),M=t(18),z=t.n(M),B=(t(29),t(3)),F=(t(30),t(8)),_=t(7),H=t(2),G=function(e,n){return n<e.length&&n>=0},W=function(e,n,t,a,r){if(!G(e,t)||!G(e,n))return!1;var c=r?t:n;return e.length-c-a>=0},Y=function(e){return!e.ship},U=function(e,n,t,a,r){var c=function(e,n,t,a,r){return r?function(e,n,t,a){return e[n].slice(t,t+a)}(e,n,t,a):function(e,n,t,a){return e.slice(n,a+n).map((function(e){return e[t]}))}(e,n,t,a)}(e,n,t,a,r);return c.every(Y)},K=function(e,n,t,a,r){return r?function(e,n,t,a){var r=Object(F.a)(e);return r[n]=r[n].map((function(e,n){return n>=t&&n<a.length+t?Object(H.a)(Object(H.a)({},e),{},{ship:a.name}):e})),r}(e,n,t,a):function(e,n,t,a){return e.map((function(e,r){return r>=n&&r<n+a.length?e.map((function(e,n){return n===t?Object(H.a)(Object(H.a)({},e),{},{ship:a.name}):e})):e}))}(e,n,t,a)},Z=[{name:"patrol boat",length:2},{name:"submarine",length:3},{name:"destroyer",length:4},{name:"battleship",length:4},{name:"carrier",length:5}],q=function(e){return e.map((function(e){return function(e,n){return{name:e,length:n,hits:0,sunk:!1,placed:!1}}(e.name,e.length)}))},V={ship:!1,attacked:!1,x:null,y:null},X=function(e){var n=Array(e).fill(Array(e).fill(null));return n=n.map((function(e,n){return e.map((function(e,t){return Object(H.a)(Object(H.a)({},V),{},{x:t,y:n})}))}))},J=function(e,n){var t={ai:e,shipsPlaced:!1,name:e?"AI ".concat(n):"Player ".concat(n+1),shots:0,hits:0};return Object(H.a)({},t)},Q=function(e,n){return e.map((function(e){return e.name===n.name?function(e){return Object(H.a)(Object(H.a)({},e),{},{placed:!0})}(e):e}))},$=function(e,n){var t,a=Object(F.a)(e),r=a.findIndex((function(e){return e.name===n})),c=Object(H.a)({},a[r]);return c.hits+=1,(t=c).hits>=t.length&&(c.sunk=!0),a[r]=c,a.map((function(e){return e}))},ee=function(e,n){var t=ne(e),a=[!0,!1][Math.floor(2*Math.random())],r=te(t,e,n,a);return{coords:r[Math.floor(Math.random()*r.length)],horizontal:a}},ne=function(e){for(var n=[],t=0;t<e.length;t++)for(var a=0;a<e[t].length;a++)n.push([t,a]);return n},te=function(e,n,t,a){return e.filter((function(e){return function(e,n,t,a,r){return!!W(e,n,t,a,r)&&U(e,n,t,a,r)}(n,e[0],e[1],t.length,a)}))},ae=function(e,n){return n>=e-1?0:n+1},re=function(e,n){switch(n.type){case"INITIALIZE-GAME":var t=n.payload,a=t.numberOfPlayers,r=t.numberOfAI,c=t.boardWidth;return ie({numberOfPlayers:a,numberOfAI:r,boardWidth:c,shipArray:Z},a>r?"namePlayers":"play");case"SET-PLAYER-NAMES":var i=n.payload,o=Object(H.a)({},e.players);return i.forEach((function(e){var n=o[e.playerID];o[e.playerID]=Object(H.a)(Object(H.a)({},n),{},{name:e.name})})),Object(H.a)(Object(H.a)({},e),{},{players:o,gameMode:"setup"});case"READY-PLAYER":var s=n.playerID,l=e.players[s],u=Object(H.a)(Object(H.a)({},e),{},{players:Object(H.a)(Object(H.a)({},e.players),{},Object(_.a)({},s,Object(H.a)(Object(H.a)({},l),{},{shipsPlaced:!0})))});return u.playerList.every((function(e){return!0===u.players[e].shipsPlaced}))&&(u=Object(H.a)(Object(H.a)({},u),{},{gameMode:"play"})),console.log("old state",e),console.log("updated state:",u),u;case"CLEAR-BOARD":var d=n.playerID,b=X(e.boards.player_0.length),j=e.ships[d].map((function(e){return Object(H.a)(Object(H.a)({},e),{},{placed:!1})}));return Object(H.a)(Object(H.a)({},e),{},{boards:Object(H.a)(Object(H.a)({},e.boards),{},Object(_.a)({},d,b)),ships:Object(H.a)(Object(H.a)({},e.ships),{},Object(_.a)({},d,j))});case"PLACE-SHIP":var p=n.playerID,h=e.boards[p],f=n.payload,O=f.y,m=f.x,x=f.ship,y=f.horizontal,g=e.ships[p],v=K(h,O,m,x,y),I=Q(g,x);return Object(H.a)(Object(H.a)({},e),{},{boards:Object(H.a)(Object(H.a)({},e.boards),{},Object(_.a)({},p,v)),ships:Object(H.a)(Object(H.a)({},e.ships),{},Object(_.a)({},p,I))});case"REMOVE-SHIP":console.log("removing");var P=n.playerID,w=n.payload,k=e.boards[P],S=e.ships[P],T=function(e,n){return e.map((function(e){return e.map((function(e){return e.ship===n.name?Object(H.a)(Object(H.a)({},e),{},{ship:!1}):e}))}))}(k,w),A=function(e,n){return e.map((function(e){return e.name===n.name?Object(H.a)(Object(H.a)({},e),{},{placed:!1}):e}))}(S,w);return Object(H.a)(Object(H.a)({},e),{},{boards:Object(H.a)(Object(H.a)({},e.boards),{},Object(_.a)({},P,T)),ships:Object(H.a)(Object(H.a)({},e.ships),{},Object(_.a)({},P,A))});case"RANDOM-PLACE-ONE":var C=n.playerID,E=n.payload,R=Object(F.a)(e.ships[C]),N=Object(F.a)(e.boards[C]),D=ee(N,E),L=D.coords,M=D.horizontal,z=Object(B.a)(L,2),G=z[0],W=z[1],Y=K(N,G,W,E,M),U=Q(R,E);return Object(H.a)(Object(H.a)({},e),{},{boards:Object(H.a)(Object(H.a)({},e.boards),{},Object(_.a)({},C,Y)),ships:Object(H.a)(Object(H.a)({},e.ships),{},Object(_.a)({},C,U))});case"RANDOM-PLACE-ALL":console.log("random place");var q=n.playerID,V=e.ships[q],J=X(e.boards.player_0.length),ne=Object(F.a)(V);return e.ships[q].forEach((function(e){var n=ee(J,e),t=n.coords,a=n.horizontal,r=Object(B.a)(t,2),c=r[0],i=r[1];J=K(J,c,i,e,a),ne=Q(ne,e)})),Object(H.a)(Object(H.a)({},e),{},{boards:Object(H.a)(Object(H.a)({},e.boards),{},Object(_.a)({},q,J)),ships:Object(H.a)(Object(H.a)({},e.ships),{},Object(_.a)({},q,ne))});case"ATTACK":var te=n.playerID,re=Object(B.a)(n.payload,2),ce=re[0],oe=re[1],se=e.boards[te],le=Object(F.a)(e.ships[te]),ue=se[ce][oe],de=function(e,n,t){return e.map((function(e,a){return e.map((function(e,r){return a===n&&r===t?Object(H.a)(Object(H.a)({},e),{},{attacked:!0}):e}))}))}(se,ce,oe),be=e.players[e.playerList[e.turnIndex]];console.log("shooting player",be);var je=be.hits;return ue.ship&&(le=$(le,ue.ship),je+=1),Object(H.a)(Object(H.a)({},e),{},{players:Object(H.a)(Object(H.a)({},e.players),{},Object(_.a)({},e.playerList[e.turnIndex],Object(H.a)(Object(H.a)({},be),{},{shots:be.shots+1,hits:je}))),lastAttackedPlayer:te,boards:Object(H.a)(Object(H.a)({},e.boards),{},Object(_.a)({},te,de)),ships:Object(H.a)(Object(H.a)({},e.ships),{},Object(_.a)({},te,le)),allowAttack:!1});case"SET-NEXT-TURN":var pe=Object(F.a)(e.playerList),he=Object(F.a)(e.playersOutOfGame);if(e.lastAttackedPlayer&&function(e){return!!e.every((function(e){return e.sunk}))}(e.ships[e.lastAttackedPlayer])){var fe=e.lastAttackedPlayer;he=[].concat(Object(F.a)(he),[fe]),pe=e.playerList.filter((function(e){return e!==fe}))}if(function(e){return 1===e.length}(pe))return console.log("Game is over"),Object(H.a)(Object(H.a)({},e),{},{gameOver:!0,playerList:pe,turnIndex:0,playersOutOfGame:he,allowAttack:!1,gameMode:"over"});var Oe=ae(pe.length,e.turnIndex),me=!!(e.playerList.filter((function(n){return!1===e.players[n].ai})).length<2||e.players[e.playerList[Oe]].ai);return Object(H.a)(Object(H.a)({},e),{},{playerList:pe,playersOutOfGame:he,turnIndex:Oe,allowAttack:!0,currentTurnPlayerIsReady:me});case"SET-TURN-READY":return Object(H.a)(Object(H.a)({},e),{},{currentTurnPlayerIsReady:!0});case"SET-MODE":return Object(H.a)(Object(H.a)({},e),{},{gameMode:n.payload});default:return{}}},ce={numberOfPlayers:2,numberOfAI:1,boardWidth:10,shipArray:Z},ie=function(e){for(var n=e.numberOfPlayers,t=e.numberOfAI,a=e.boardWidth,r=e.shipArray,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"init",i={},o=[],s=0;s<n;s++)i["player_".concat(s)]=J(!(s<n-t),s),o.push("player_".concat(s));var l={};o.forEach((function(e){l[e]=X(a)}));var u={};o.forEach((function(e){u[e]=q(r)}));var d=0,b=!1,j=o.filter((function(e){return!0===i[e].ai}));j.length>0&&j.forEach((function(e){var n=u[e],t=l[e];i[e].shipsPlaced=!0,n.forEach((function(n){n.placed=!0;var a=ee(t,n),r=a.coords,c=a.horizontal,i=Object(B.a)(r,2),o=i[0],s=i[1];t=K(t,o,s,n,c),l[e]=t}))}));var p=[];return{players:i,ships:u,boards:l,playerList:o,turnIndex:d,gameOver:b,gameMode:c,playersOutOfGame:p,allowAttack:!0,currentTurnPlayerIsReady:!1}},oe=t(4),se=t(5),le="#303030",ue="#3b3b3b",de="#b8022c",be="#8787d6",je={100:"#000031",90:"#0e1f4c",50:"#696EA5",10:"#B4B7F3"},pe={100:"#663268",90:"#B14a6e",50:"#e87664",40:"#FFB35B",20:"#F9F871"},he=Object(se.a)(a||(a=Object(oe.a)(["\n    *{\n        box-sizing: border-box;\n    }\n    html{\n        background: ",';\n    }\n    body{\n        padding-bottom: 50px;\n    }\n    h1,h2,h3,h4,h5,p,button,span{\n        font-family: "Lexend", sans-serif;\n    }\n    div,h1,h2,h3,h4,h5,p,h6,button{\n        margin: 0;\n    }\n    header{\n        color: ',";\n        padding: 2em;\n        background: ",";\n        margin-bottom: 2em;\n        h1{\n            padding: 0 1em;\n            margin: 0 auto;\n            max-width: 1200px;\n        }\n    }\n    .contentContainer{\n        position: relative;\n        margin: 0 auto;\n        width: 90%;\n        max-width: 1200px;\n        display: flex;\n        justify-content: center;\n        align-items: flex-start; \n\n        @media only screen and (max-width:635px){\n            flex-direction: column;\n            align-items: center;\n            \n        }\n    }\n    .boards{\n        flex-grow: 1;\n        display:flex;\n        flex-wrap: wrap;\n        justify-content: center;\n        gap: .5rem;\n        .ai{\n            align-items: flex-start;\n        }\n    }\n"])),le,pe[40],le),fe=se.b.div(r||(r=Object(oe.a)(["\n  width: 100%;\n  border: 1px solid black;\n  padding-bottom: 100%;\n"]))),Oe=Object(se.b)(fe)(c||(c=Object(oe.a)(["\n  background-color: ",";\n"])),(function(e){var n=e.cell;return e.showShip?n.ship?n.attacked?de:le:n.attacked?be:je[90]:n.attacked?n.ship?de:be:je[90]})),me=Object(se.b)(fe)(i||(i=Object(oe.a)(["\n  background: ",";\n"])),(function(e){switch(e.bg_color){case"ship":return"gray";case"empty":return je[90];case"invalid":return de;case"valid":return pe[90];default:return je[90]}})),xe=se.b.div(o||(o=Object(oe.a)(["\n  display: grid;\n  grid-template-columns: repeat(",", 1fr);\n  max-width: ",";\n  min-width: ",";\n  flex-grow: 1;\n\n  &::after {\n    padding-bottom: 100%;\n  }\n"])),(function(e){return e.boardWidth}),(function(e){var n=e.statBoard,t=e.over;return n&&!t?"200px":"400px"}),(function(e){var n=e.statBoard,t=e.over;return n&&!t?"100px":"250px"})),ye=(se.b.div(s||(s=Object(oe.a)([""]))),se.b.div(l||(l=Object(oe.a)(["\n  text-align: center;\n  background-color: grey;\n"]))),se.b.p(u||(u=Object(oe.a)([""]))),se.b.div(d||(d=Object(oe.a)(["\n  width: 25%;\n"]))),se.b.div(b||(b=Object(oe.a)(["\n  display: flex;\n"])))),ge=se.b.div(j||(j=Object(oe.a)(["\n  transform: ",";\n  transition: transform 0.25s linear;\n  margin-top: auto;\n  margin-bottom: auto;\n"])),(function(e){return e.horizontalPlacement?"rotateZ(90deg)":"rotateZ(0)"})),ve=se.b.div(p||(p=Object(oe.a)(["\n  padding: 1rem 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  flex-grow: 1;\n  #rotateButton {\n    color: ",";\n  }\n  &:hover {\n    #rotateButton {\n      color: ",";\n    }\n  }\n"])),pe[40],pe[50]),Ie=se.b.div(h||(h=Object(oe.a)(["\n  background-color: grey;\n  width: 5px;\n  height: 5px;\n"]))),Pe=se.b.div(f||(f=Object(oe.a)(["\n  background-color: grey;\n  width: 10px;\n  height: 10px;\n"]))),we=se.b.li(O||(O=Object(oe.a)(["\n  flex-grow: 1;\n  display: flex;\n  align-items: baseline;\n  justify-content: space-between;\n  gap: 5%;\n  border: 0.02em solid black;\n  padding: 0.25rem 1rem;\n  cursor: pointer;\n  color: ",";\n  background-color: ",";\n  &:hover {\n    filter: brightness(125%);\n  }\n  &:nth-child(even) {\n    background-color: ",";\n  }\n"])),pe[40],(function(e){var n=e.hasBeenPlaced,t=e.isCurrentShip,a=e.ship;return e.play?a.sunk?de:a.hits>0?pe[90]:je[90]:n?pe[100]:t?pe[90]:je[90]}),(function(e){var n=e.hasBeenPlaced,t=e.isCurrentShip,a=e.ship;return e.play?a.sunk?de:a.hits>0?pe[90]:je[100]:n?pe[100]:t?pe[90]:je[100]})),ke=(se.b.div(m||(m=Object(oe.a)(["\n  cursor: pointer;\n  display: flex;\n  margin: 2px;\n  flex-direction: column;\n  align-items: center;\n  background-color: ",";\n  &:hover {\n    background-color: ",";\n  }\n"])),(function(e){var n=e.allPlayersPlaced,t=e.currentSelection;return n?t?"orange":"whitesmoke":"cadetblue"}),(function(e){var n=e.allPLayersPlaced;return e.currentSelection?null:n?"ghostwhite":null})),se.b.div(x||(x=Object(oe.a)(["\n  z-index: 100;\n  flex-grow: 1;\n  max-width: 400px;\n  min-width: 200px;\n  width: 15%;\n  position: sticky;\n  top: 0.5rem;\n  background-color: ",";\n  padding: 1rem;\n  margin-bottom: 1rem;\n\n  ul {\n    padding: 0;\n    max-width: 50%;\n    min-width: 111px;\n  }\n  .playerInfo {\n    flex-direction: column;\n    display: flex;\n    justify-content: flex-start;\n    gap: 3rem;\n  }\n  .buttons {\n    display: flex;\n    flex-direction: column;\n    flex-grow: 1;\n    justify-content: center;\n  }\n  header {\n    background: ",";\n    color: ",";\n    padding: 1rem;\n    margin: 0.25rem;\n    display: flex;\n    align-items: baseline;\n    justify-content: center;\n  }\n  .currentPlayerTurn {\n    font-weight: bold;\n  }\n  .content {\n    display: flex;\n    flex-wrap: wrap;\n  }\n\n  .list {\n    width: 50%;\n  }\n  .collapseRow {\n    display: flex;\n    flex-grow: 1;\n    min-width: 170px;\n    width: 100%;\n  }\n  @media only screen and (max-width: 635px) {\n    width: 100%;\n    .buttons {\n      flex-direction: row;\n    }\n    .collapseRow {\n    }\n    .content {\n      flex-direction: column;\n      flex-wrap: nowrap;\n    }\n    .playerInfo {\n      flex-direction: row;\n      flex-wrap: wrap;\n      justify-content: center;\n      gap: 0.5rem;\n    }\n  }\n"])),ue,je[100],pe[40])),Se=(se.b.div(y||(y=Object(oe.a)(["\n  display: flex;\n  align-items: center;\n  flex-wrap: wrap;\n"]))),se.b.h4(g||(g=Object(oe.a)(["\n  text-transform: uppercase;\n  font-size: 0.6rem;\n  font-weight: bold;\n  display: inline;\n"])))),Te=se.b.label(v||(v=Object(oe.a)(["\n  color: ",";\n  font-weight: bold;\n  background: ",";\n  writing-mode: vertical-lr;\n  transform: rotate(180deg);\n  text-align: center;\n  padding: 0.25rem;\n"])),pe[40],je[100]),Ae=se.b.div(I||(I=Object(oe.a)(["\n  flex-grow: 1;\n  display: flex;\n  align-items: stretch;\n  justify-content: center;\n  gap: 0.25em;\n  animation: ",";\n  @keyframes fade-in {\n    0% {\n      opacity: 0;\n    }\n    100% {\n      opacity: 1;\n    }\n  }\n"])),(function(e){return e.isVisible?"fade-in 0.05s ease-in":"fade-in 0.05s ease-out reverse"})),Ce=se.b.ul(P||(P=Object(oe.a)(["\n  position: sticky;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  align-items: flex-end;\n  bottom: 10px;\n  width: 90%;\n  margin: 0 auto;\n  max-width: 900px;\n  z-index: 901;\n  list-style: none;\n"]))),Ee=se.b.li(w||(w=Object(oe.a)(["\n  list-style: none;\n  color: ",";\n  background: ",";\n  padding: 0.5em 1em;\n  span {\n    margin-left: 2em;\n  }\n  animation: fader 0.5s ease-in;\n  &:nth-child(even) {\n    filter: brightness(0.9);\n  }\n  @keyframes fader {\n    0% {\n      opacity: 0;\n    }\n    100% {\n      opacity: 1;\n    }\n  }\n"])),pe[40],(function(e){var n=e.type;return"HIT"===n?de:"MISS"===n?je[50]:"green"})),Re=(se.b.div(k||(k=Object(oe.a)([""]))),se.b.button(S||(S=Object(oe.a)(["\n  color: ",";\n  font-weight: bold;\n  font-size: 0.75rem;\n  background: ",";\n  padding: 0.5rem;\n  border-radius: 3px;\n  border: none;\n  margin: 0.25rem;\n  &:hover {\n    background: ",";\n  }\n  span {\n    text-align: center;\n  }\n"])),pe[40],je[90],je[100])),Ne=se.b.div(T||(T=Object(oe.a)(["\n  background: ",";\n  margin: 0;\n  padding: 1rem;\n"])),je[100]),De=se.b.h4(A||(A=Object(oe.a)(["\n  color: ",";\n  opacity: ",";\n  transition: opacity 0.3s ease-out;\n"])),pe[40],(function(e){return e.fadeIn?1:0})),Le=se.b.div(C||(C=Object(oe.a)(["\n  background: ",";\n  padding: 2rem;\n  text-align: center;\n  p {\n    font-size: 1.5rem;\n    color: ",";\n    padding: 2rem;\n  }\n"])),ue,pe[40]),Me=se.b.div(E||(E=Object(oe.a)(["\n  color: ",";\n  background: ",";\n  padding: 2rem;\n  border-radius: 5px;\n  box-shadow: 0px 10px 10px rgba(0, 0, 0, 0.2);\n  max-width: 100%;\n  @media only screen and (max-width: 400px) {\n    padding: 0;\n    width: 100%;\n  }\n  ul {\n    padding-inline-start: 0;\n    @media only screen and (max-width: 400px) {\n      padding: 0;\n      width: 100%;\n    }\n  }\n  input {\n    text-align: right;\n    border: 1px solid ",";\n    font-weight: bold;\n    font-size: 1rem;\n    border-radius: 5px;\n    background: ",";\n    padding: 0.5rem;\n    color: ",";\n    @media only screen and (max-width: 400px) {\n      width: 100%;\n    }\n  }\n  header {\n    text-align: center;\n  }\n  .content {\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n    justify-content: center;\n    width: 100%;\n    @media only screen and (min-width: 400px) {\n      flex-direction: row;\n    }\n    li {\n      display: flex;\n      background: ",";\n      @media only screen and (max-width: 400px) {\n        text-align: center;\n        width: 100%;\n        flex-direction: column;\n      }\n      &:nth-child(odd) {\n        background: ",";\n      }\n    }\n  }\n  .initForm {\n    list-style: none;\n    .initInput {\n      display: flex;\n      justify-content: flex-end;\n      gap: 1rem;\n      align-items: center;\n      padding: 1rem;\n    }\n  }\n\n  .stats {\n    list-style: none;\n    li {\n      margin: 0;\n      display: flex;\n      gap: 0.5rem;\n      color: ",";\n      padding: 1rem;\n      background: ",";\n      &:nth-child(even) {\n        background: ",";\n      }\n    }\n  }\n  .controls {\n    margin-top: 1rem;\n    text-align: center;\n  }\n"])),pe[40],ue,pe[40],le,pe[40],je[100],je[90],pe[40],je[100],je[90]),ze=se.b.form(R||(R=Object(oe.a)(["\n  ul {\n    list-style: none;\n    padding: 2rem;\n    li {\n      background: ",";\n      color: ",";\n      font-weight: bold;\n      display: flex;\n      justify-content: space-around;\n      padding: 1rem;\n      gap: 2rem;\n      &:nth-child(even) {\n        background: ",";\n      }\n    }\n  }\n"])),je[100],pe[40],je[90]),Be=se.b.div(N||(N=Object(oe.a)(["\n  //inherit a whole bunch of stuff to make the wrapper not affect layout\n  width: 100%;\n  display: inherit;\n  flex-direction: inherit;\n  flex-wrap: inherit;\n  justify-content: inherit;\n  align-items: inherit;\n\n  opacity: ",";\n  transition: ",";\n"])),(function(e){return e.isOpaque?1:0}),(function(e){var n=e.fadeTime;return"opacity ".concat(n,"ms ease-in")})),Fe=t(0),_e=function(e){var n=e.playerName,t=e.playerID,a=e.setPlayerReady;return Object(Fe.jsxs)(Le,{children:[Object(Fe.jsxs)("p",{children:[n,", are you ready?"]}),Object(Fe.jsx)(Re,{onClick:function(){a(t)},children:"OK"})]})},He=function(e){var n,t=e.ship,a=e.selectShipToPlaceOrReplace,r=e.shipIndex,c=e.indexOfShipToPlace,i=e.clickable,o=e.placement,s=Object(D.useContext)(dn),l=s.players,u=s.playerList.every((function(e){return!0===l[e].shipsPlaced}));return Object(Fe.jsxs)(we,{play:!o,allPlayersPlaced:u,ship:t,hasBeenPlaced:t.placed,isCurrentShip:r===c,onClick:function(){return i?a(r):null},children:[Object(Fe.jsx)(Se,{children:t.name}),(n=t.length,Object(Fe.jsx)(ye,{children:Array.from({length:n},(function(e,n){return Object(Fe.jsx)(Ie,{},"shipCell_".concat(n))}))}))]})},Ge=function(e){var n,t=e.ships,a=e.selectShipToPlaceOrReplace,r=e.indexOfShipToPlace,c=e.clickable,i=e.placement;return Object(Fe.jsx)("ul",{children:(n=t,n.map((function(e,n){return Object(Fe.jsx)(He,{placement:i,clickable:c,shipIndex:n,ship:e,selectShipToPlaceOrReplace:a,indexOfShipToPlace:r},"ship_list_".concat(n))})))})},We=t(22),Ye=t(23),Ue=function(e){var n=e.ship,t=e.horizontalPlacement,a=e.toggleHorizontal;return Object(Fe.jsxs)(ve,{onClick:a,children:[Object(Fe.jsx)(ge,{horizontalPlacement:t,children:Array.from({length:n.length},(function(e,n){return Object(Fe.jsx)(Pe,{},"orientation_".concat(n))}))}),Object(Fe.jsx)(We.a,{id:"rotateButton",icon:Ye.a})]})},Ke=function(e){var n=e.shipsToPlace,t=e.toggleHorizontal,a=e.horizontalPlacement,r=e.playerToPlace,c=e.shouldPromptPlayerOk,i=e.confirmPlayerReady,o=e.selectShipToPlaceOrReplace,s=e.indexOfShipToPlace,l=e.initMessage,u=e.resetMessage,d=Object(D.useContext)(bn);return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsxs)("div",{className:"collapseRow",children:[Object(Fe.jsx)(Ge,{placement:!0,clickable:!0,indexOfShipToPlace:s,ships:n,selectShipToPlaceOrReplace:o}),Object(Fe.jsx)(Ue,{toggleHorizontal:t,ship:n[s],horizontalPlacement:a})]}),Object(Fe.jsx)("div",{className:"buttons",children:c?Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(Re,{onClick:function(){setTimeout((function(){i(r)}),500)},children:"Ok?"}),Object(Fe.jsx)(Re,{onClick:function(){u(l()),d({type:"CLEAR-BOARD",playerID:r})},children:"Reset"})]}):Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(Re,{onClick:function(){d({type:"RANDOM-PLACE-ONE",playerID:r,payload:n[s]})},children:Object(Fe.jsx)("span",{children:"Randomize Ship"})}),Object(Fe.jsx)(Re,{children:Object(Fe.jsx)("span",{onClick:function(){d({type:"RANDOM-PLACE-ALL",playerID:r})},children:"Randomize Fleet"})})]})})]})},Ze=function(e){var n=e.cell,t=e.setPointer,a=e.getSelectionInformation,r=e.board,c=e.playerID,i=e.currentShip,o=e.horizontalPlacement,s=n.x,l=n.y,u=n.ship,d=Object(D.useContext)(bn),b=function(){var e=a();return!!e.valid&&!e.cells.some((function(e){return!1!==r[e[0]][e[1]].ship}))};return Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsx)(me,{bg_color:function(){if(u)return"ship";if(a().cells.some((function(e){return e[0]===l&&e[1]===s}))){if(i.placed)return;return b()?"valid":"invalid"}return"empty"}(),onMouseEnter:function(){t(l,s)},onClick:function(){b()&&(i.placed||d({type:"PLACE-SHIP",playerID:c,payload:{x:s,y:l,ship:i,horizontal:o}}))}})})},qe=function(e,n,t){var a=Object(D.useState)({x:!1,y:!1}),r=Object(B.a)(a,2),c=r[0],i=r[1];return{currentPointer:c,setPointer:function(e,n){i(Object(H.a)(Object(H.a)({},c),{},{y:e,x:n}))},setNoPointer:function(){i({x:!1,y:!1})},getCurrentSelection:function(){return{cells:function(e,t,a){if(a&&!1!==t&&!1!==e){for(var r=n?t:e,c=[],i=0;i<a.length;i++)n?c.push([e,r]):c.push([r,t]),r+=1;return c}return[]}(c.y,c.x,t),valid:function(e,t){return W(e,c.y,c.x,t.length,n)}(e,t)}}}},Ve=function(e){var n=e.board,t=e.currentShip,a=e.horizontalPlacement,r=e.playerID,c=(e.handlePlaceShip,qe(n,a,t));return Object(Fe.jsx)(xe,{boardWidth:n.length,onMouseLeave:c.setNoPointer,children:function(e){return e.map((function(n,i){return n.map((function(n,o){return Object(Fe.jsx)(Ze,{horizontalPlacement:a,currentShip:t,playerID:r,board:e,cell:n,setPointer:c.setPointer,getSelectionInformation:c.getCurrentSelection},"placement ".concat(i,",").concat(o))}))}))}(n)})},Xe=function(){var e=Object(D.useState)(!1),n=Object(B.a)(e,2),t=n[0],a=n[1],r=Object(D.useContext)(dn),c=r.boards,i=r.ships,o=r.playerList,s=r.players,l=r.gameMode,u=Object(D.useState)({index:0,id:"player_0",name:s[o[0]].name}),d=Object(B.a)(u,2),b=d[0],j=d[1],p=Object(D.useContext)(bn),h=Object(D.useState)(0),f=Object(B.a)(h,2),O=f[0],m=f[1],x=Object(D.useState)(!1),y=Object(B.a)(x,2),g=y[0],v=y[1],I=Object(D.useState)(!1),P=Object(B.a)(I,2),w=P[0],k=P[1],S=function(){return"".concat(b.name,", place your ships.")},T=Object(D.useState)(S),A=Object(B.a)(T,2),C=A[0],E=A[1],R=Object(D.useCallback)((function(e){return k(!1),setTimeout((function(){E(e),k(!0)}),300)}),[]);Object(D.useEffect)((function(){if(b){var e=R("".concat(b.name,", place your ships."));return function(){return clearTimeout(e)}}}),[b,R]);Object(D.useEffect)((function(){!1!==b&&(i[b.id].every((function(e){return!0===e.placed}))?(v(!0),R("Ready?")):v(!1))}),[i,b,R]),Object(D.useEffect)((function(){if(b&&i[b.id][O].placed&&i[b.id].some((function(e){return!1===e.placed}))){var e=!1,n=O+1;for(n>=i[b.id].length&&(n=0);!e;)i[b.id][n].placed?n+=1:e=!0;m(n)}}),[i,b,O]);return b?Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsxs)(ke,{children:[Object(Fe.jsx)(Ne,{children:Object(Fe.jsx)(De,{fadeIn:w,children:C})}),Object(Fe.jsx)("div",{className:"content",children:Object(Fe.jsx)(Ke,{horizontalPlacement:t,toggleHorizontal:function(){a((function(e){return!e}))},shipsToPlace:i[b.id],playerToPlace:b.id,shouldPromptPlayerOk:g,confirmPlayerReady:function(e){p({type:"READY-PLAYER",playerID:e});var n=b.index+1;if(n<o.filter((function(e){return!1===s[e].ai})).length){v(!1),m(0),R(S());var t=s[o[n]],a=o[n];j({index:n,name:t.name,id:a})}},selectShipToPlaceOrReplace:function(e){m(e),i[b.id][e].placed&&("Ready?"===C&&R(S()),p({type:"REMOVE-SHIP",playerID:b.id,payload:i[b.id][e]}))},indexOfShipToPlace:O,resetMessage:R,initMessage:S})})]}),Object(Fe.jsxs)("div",{className:"boards",children:[console.log(i,b,O),console.log(l),Object(Fe.jsx)(Ve,{board:c[b.id],horizontalPlacement:t,currentShip:i[b.id][O],playerID:b.id})]})]}):null},Je=function(e){var n=e.board,t=e.playerID,a=(e.isAI,e.statBoard),r=e.over,c=Object(D.useContext)(dn),i=c.players,o=c.turnIndex,s=c.playerList,l=c.allowAttack,u=Object(D.useContext)(bn),d=Object(D.useContext)(pn);return Object(Fe.jsxs)(Ae,{children:[Object(Fe.jsx)(Te,{children:i[t].name}),Object(Fe.jsx)(xe,{over:r,statBoard:a,boardWidth:n.length,children:function(e){return e.map((function(e,n){return e.map((function(e,r){return Object(Fe.jsx)(Oe,{showShip:a,cell:e,onClick:function(){i[s[o]].ai||t!==s[o]&&l&&(e.attacked||(u({type:"ATTACK",playerID:t,payload:[n,r]}),e.ship?(console.log("hit!"),d({type:"HIT",message:"HIT!"})):d({type:"MISS",message:"MISS!"}),setTimeout((function(){u({type:"SET-NEXT-TURN"})}),1500)))}},"cell_".concat(t,"_").concat(n,"-").concat(r))}))}))}(n)})]})},Qe=function(e,n,t,a){return n.map((function(n){return Object(Fe.jsx)(Je,{board:e[n],playerID:n,isAI:t[n].ai},"board_".concat(n))}))},$e=function(e,n,t){var a=n.filter((function(n){return n!==e})),r=a[Math.floor(Math.random()*a.length)],c=t[r],i=c.reduce((function(e,n){return e.concat(n)})),o=i.filter((function(e){return e.attacked&&e.ship})),s=o.map((function(e){return function(e,n){var t=Object(B.a)(n,2),a=t[0],r=t[1],c=[];return a+1<e.length&&c.push([a+1,r]),a-1<e.length&&a-1>=0&&c.push([a-1,r]),r+1<e.length&&c.push([a,r+1]),r-1<e.length&&r-1>=0&&c.push([a,r-1]),c}(c,[e.y,e.x])}));s.length>0&&(s=s.reduce((function(e,n){return e.concat(n)})));var l=i.filter((function(e){return!1===e.attacked})).map((function(e){return[e.y,e.x]})),u=s.filter((function(e){return!1===c[e[0]][e[1]].attacked})),d=u.length>0?u:l,b=d[Math.floor(Math.random()*d.length)],j=Object(B.a)(b,2);return{playerID:r,y:j[0],x:j[1]}},en=function(){var e=Object(D.useContext)(pn),n=Object(D.useContext)(dn),t=n.boards,a=n.playerList,r=n.players,c=n.turnIndex,i=Object(D.useContext)(bn),o=Object(D.useRef)([]),s=Object(D.useRef)([]),l=r[a[c]],u=Object(D.useRef)(!1);Object(D.useEffect)((function(){u.current&&(u.current=!1)}),[c]),Object(D.useEffect)((function(){if(console.log("useEffect running in aiTurn"),!n.gameOver&&n.allowAttack&&!u.current){u.current=!0;var d=n.playerList[n.turnIndex];if(n.players[d].ai){var b=$e(d,n.playerList,n.boards),j=b.y,p=b.x,h=b.playerID,f=t[h][j][p],O=setTimeout((function(){f.ship?(console.log("hit!"),e({type:"HIT",message:"".concat(l.name," attacks ").concat(r[h].name,"...and hits!")})):e({type:"MISS",message:"".concat(l.name," attacks ").concat(r[h].name,"...and misses.")}),i({type:"ATTACK",playerID:h,payload:[j,p]})}),1e3),m=r[a[ae(a.length,c)]].ai?2e3:3e3,x=setTimeout((function(){i({type:"SET-NEXT-TURN"})}),m);s.current.push(x),o.current.push(O)}}}),[i,n.allowAttack,n.boards,n.gameOver,n.playerList,n.players,n.turnIndex,a,r,c,e,t,l.name]);return Object(D.useEffect)((function(){return function(){return s.current.forEach((function(e){return clearTimeout(e)})),void o.current.forEach((function(e){return clearTimeout(e)}))}}),[]),Object(Fe.jsx)("div",{className:"boards ai",children:Qe(t,a,r)})},nn=function(e){var n=e.players,t=e.playerList,a=e.turnIndex,r=e.boards,c=e.ships,i=t.filter((function(e){return e!==t[a]}));return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsxs)(ke,{children:[Object(Fe.jsx)("div",{className:"turnInfo",children:Object(Fe.jsx)("header",{children:Object(Fe.jsx)("h4",{className:"currentPlayerTurn",children:n[t[a]].name})})}),Object(Fe.jsxs)("div",{className:"playerInfo",children:[Object(Fe.jsx)("div",{className:"shipInfo",children:Object(Fe.jsx)(Ge,{clickable:!1,ships:c[t[a]]})}),Object(Fe.jsx)(Je,{statBoard:!0,board:r[t[a]],playerID:t[a],isAI:!1})]})]}),Object(Fe.jsx)("div",{className:"boards",children:Qe(r,i,n)})]})},tn=function(e){var n=e.showOne,t=e.trueContent,a=e.falseContent,r=e.fadeTime,c=Object(D.useState)(n),i=Object(B.a)(c,2),o=i[0],s=i[1],l=Object(D.useState)(!0),u=Object(B.a)(l,2),d=u[0],b=u[1],j=Object(D.useRef)(!1);return Object(D.useEffect)((function(){if(j.current){b(!1);var e=setTimeout((function(){s(n),b(!0)}),r);return function(){return clearTimeout(e)}}j.current=!0}),[r,n]),Object(Fe.jsx)(Be,{isOpaque:d,fadeTime:r,children:o?t:a})},an=function(){var e=Object(D.useContext)(dn),n=e.boards,t=e.ships,a=e.turnIndex,r=e.playerList,c=e.players;console.log("turn index:",a),console.log("playerlist",r);var i=Object(D.useState)(a),o=Object(B.a)(i,2),s=o[0],l=o[1],u=c[r[a]],d=Object(D.useState)(u.ai),b=Object(B.a)(d,2),j=b[0],p=b[1],h=Object(D.useRef)(!1);Object(D.useEffect)((function(){if(h.current){p(c[r[a]].ai);var e=setTimeout((function(){l(a),console.log("changing currentDispTurn to",a)}),2500);return function(){return clearTimeout(e)}}h.current=!0}),[a,c,r]);var f=Object(Fe.jsx)(nn,{playerList:r,players:c,boards:n,turnIndex:s,ships:t});return Object(Fe.jsx)(tn,{showOne:j,trueContent:Object(Fe.jsx)(en,{}),falseContent:f,fadeTime:500})},rn=function(){var e=Object(D.useContext)(bn),n=Object(D.useContext)(dn),t=n.players,a=n.playerList,r=n.boards,c=n.ships,i=t[a[0]],o=function(e){var n=e.reduce((function(e,n){return e+n.length}),0);return{totalHits:e.reduce((function(e,n){return e+n.hits}),0),fleetSize:n}}(c[a[0]]);return Object(Fe.jsxs)(Me,{children:[Object(Fe.jsx)("header",{children:Object(Fe.jsxs)("h2",{children:[t[a[0]].name," wins!"]})}),Object(Fe.jsxs)("div",{className:"content",children:[Object(Fe.jsx)(Je,{over:!0,statBoard:!0,board:r[a[0]],playerID:a[0],isAI:!1}),Object(Fe.jsxs)("ul",{className:"stats",children:[Object(Fe.jsxs)("li",{children:[Object(Fe.jsx)("p",{children:"Shots:"}),Object(Fe.jsx)("p",{children:i.shots})]}),Object(Fe.jsxs)("li",{children:[Object(Fe.jsx)("p",{children:"Hit Percentage:"}),Object(Fe.jsxs)("p",{children:[Math.round(i.hits/i.shots*100),"%"]})]}),Object(Fe.jsxs)("li",{children:[Object(Fe.jsx)("p",{children:"Total hits on fleet"}),Object(Fe.jsxs)("p",{children:[o.totalHits,"/",o.fleetSize]})]})]})]}),Object(Fe.jsx)("div",{className:"controls",children:Object(Fe.jsx)(Re,{onClick:function(){e({type:"SET-MODE",payload:"init"})},children:"New Game"})})]})},cn=function(){var e=Object(D.useState)(2),n=Object(B.a)(e,2),t=n[0],a=n[1],r=Object(D.useState)(1),c=Object(B.a)(r,2),i=c[0],o=c[1],s=Object(D.useState)(10),l=Object(B.a)(s,2),u=l[0],d=l[1],b=Object(D.useContext)(bn),j=function(e){e.preventDefault(),console.log("initializing"),b({type:"INITIALIZE-GAME",payload:{numberOfPlayers:t,numberOfAI:i,boardWidth:u}})},p=function(e){switch(e.target.name){case"players":a(parseInt(e.target.value));break;case"aiCount":o(parseInt(e.target.value));break;case"boardSize":d(parseInt(e.target.value))}};return Object(Fe.jsxs)(Me,{children:[Object(Fe.jsx)("header",{children:Object(Fe.jsx)("h2",{children:"Game Setup"})}),Object(Fe.jsx)("div",{className:"content",children:Object(Fe.jsx)("form",{onSubmit:j,children:Object(Fe.jsxs)("ul",{className:"initForm",children:[Object(Fe.jsxs)("li",{className:"initInput",children:[Object(Fe.jsx)("label",{htmlFor:"totalPlayers",children:"Total Number of Players:"}),Object(Fe.jsx)("input",{type:"number",value:t,name:"players",id:"totalPlayers",min:2,max:4,onChange:p})]}),Object(Fe.jsxs)("li",{className:"initInput",children:[Object(Fe.jsx)("label",{htmlFor:"totalAI",children:"Number of AI players:"}),Object(Fe.jsx)("input",{type:"number",value:i,name:"aiCount",id:"totalAI",min:0,max:t,onChange:p})]}),Object(Fe.jsxs)("li",{className:"initInput",children:[Object(Fe.jsx)("label",{htmlFor:"boardSize",children:"Width of Board:"}),Object(Fe.jsx)("input",{type:"number",value:u,name:"boardSize",id:"boardSize",min:8,max:15,onChange:p})]})]})})}),Object(Fe.jsx)("div",{className:"controls",children:Object(Fe.jsx)(Re,{onClick:j,children:"Start"})})]})},on=t(24),sn=function(){var e=Object(D.useContext)(bn),n=Object(D.useContext)(dn),t=n.players,a=n.playerList.filter((function(e){return!1===t[e].ai})),r=Object(D.useState)((function(){return function(){var e,n={},r=Object(on.a)(a);try{for(r.s();!(e=r.n()).done;){var c=e.value;console.log(c),n[c]=t[c].name}}catch(i){r.e(i)}finally{r.f()}return n}()})),c=Object(B.a)(r,2),i=c[0],o=c[1],s=function(e){var n=e.target.name;o((function(t){return Object(H.a)(Object(H.a)({},t),{},Object(_.a)({},n,e.target.value))}))};return Object(Fe.jsxs)(Me,{children:[Object(Fe.jsx)("header",{children:Object(Fe.jsx)("h2",{children:"Player Names"})}),Object(Fe.jsx)("div",{className:"content",children:Object(Fe.jsx)(ze,{children:Object(Fe.jsx)("ul",{children:a.map((function(e,n){return Object(Fe.jsxs)("li",{children:[Object(Fe.jsxs)("label",{htmlFor:"".concat(e,"_input"),children:["Player ",n+1]}),Object(Fe.jsx)("input",{onChange:s,id:"".concat(e,"_input"),type:"text",name:"".concat(e),value:i[e]})]},"input_for_".concat(e))}))})})}),Object(Fe.jsx)("div",{className:"controls",children:Object(Fe.jsx)(Re,{onClick:function(){e({type:"SET-PLAYER-NAMES",payload:a.map((function(e){return{playerID:e,name:i[e]}}))})},children:"Start Game"})})]})},ln=function(e){var n=e.optionsObject,t=e.currentOption,a=e.fadeTime,r=Object(D.useState)(!1),c=Object(B.a)(r,2),i=c[0],o=c[1],s=Object(D.useState)(t),l=Object(B.a)(s,2),u=l[0],d=l[1];return Object(D.useEffect)((function(){o(!1),setTimeout((function(){d(t),o(!0)}),a)}),[t,a]),Object(Fe.jsx)(Be,{isOpaque:i,fadeTime:a,children:n[u]})},un=function(e){var n=e.mode,t=Object(D.useContext)(dn),a=t.playerList,r=t.players,c=t.turnIndex,i=t.currentTurnPlayerIsReady,o=t.gameOver?a[0]:a[c],s=Object(D.useContext)(bn),l=Object(Fe.jsx)(_e,{playerID:o,playerName:r[o].name,setPlayerReady:function(e){s({type:"SET-TURN-READY"})}}),u=Object(Fe.jsx)(an,{}),d={init:Object(Fe.jsx)(cn,{}),namePlayers:Object(Fe.jsx)(sn,{}),setup:Object(Fe.jsx)(Xe,{}),play:Object(Fe.jsx)(tn,{showOne:i,trueContent:u,falseContent:l,fadeTime:300}),over:Object(Fe.jsx)(rn,{})};return Object(Fe.jsx)(ln,{optionsObject:d,currentOption:n,fadeTime:500})},dn=Object(D.createContext)(null),bn=Object(D.createContext)(null),jn=function(){var e=Object(D.useReducer)(re,ce,ie),n=Object(B.a)(e,2),t=n[0],a=n[1];return Object(Fe.jsx)(dn.Provider,{value:t,children:Object(Fe.jsx)(bn.Provider,{value:a,children:Object(Fe.jsx)(un,{mode:t.gameMode})})})},pn=Object(D.createContext)();var hn=function(){var e=function(e,n){var t=Object(D.useState)([]),a=Object(B.a)(t,2),r=a[0],c=a[1],i=Object(D.useRef)([]),o=function(){c((function(e){return i.current.shift(),e.slice(1)}))},s=function(e,n){return Object(Fe.jsxs)(Ee,{type:e.type,children:[e.message,Object(Fe.jsx)("span",{onClick:function(){l(n)},children:"close"})]},"alert_"+n)},l=function(e){c((function(n){return n.slice(0,e).concat(n.slice(e+1))}))};return[Object(Fe.jsx)(Ce,{children:r.map(s)}),function(t){var a=t.type,r=t.message;c((function(n){return n.length>=e-1?[].concat(Object(F.a)(n.slice(1)),[{type:a,message:r}]):[].concat(Object(F.a)(n),[{type:a,message:r}])})),i.current.push(setTimeout(o,n))}]}(1,2e3),n=Object(B.a)(e,2),t=n[0],a=n[1];return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)("header",{children:Object(Fe.jsx)("h1",{children:"Battle Boat"})}),Object(Fe.jsx)(pn.Provider,{value:a,children:Object(Fe.jsx)("div",{className:"contentContainer",children:Object(Fe.jsx)(jn,{})})}),t]})};z.a.render(Object(Fe.jsxs)(L.a.StrictMode,{children:[Object(Fe.jsx)(he,{}),Object(Fe.jsx)(hn,{})]}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.6d8b3fcd.chunk.js.map